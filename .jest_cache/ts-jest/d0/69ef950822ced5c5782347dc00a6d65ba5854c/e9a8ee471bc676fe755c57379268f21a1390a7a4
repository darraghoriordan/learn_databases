[["/Users/darraghoriordan/Documents/personal-projects/learn_databases/src/testing/preRun.ts",{"fileContent":"import \"reflect-metadata\";\n","resolvedModuleNames":[]}],["/Users/darraghoriordan/Documents/personal-projects/learn_databases/src/lesson3/testDatabaseConnection.test.ts",{"fileContent":"import AppDataSource from \"./appDatasource\";\n\nafterAll(async () => {\n  await AppDataSource.closeConnections();\n});\n\ndescribe(\"Test the data base connection\", () => {\n  it(\"should be able to select 1\", async () => {\n    const connection = await AppDataSource.connection();\n    // eslint-disable-next-line @typescript-eslint/await-thenable\n    const queryRunner = await connection.createQueryRunner();\n    const selection = (await queryRunner.manager.query(\n      \"SELECT 1 as TestResult\"\n    )) as [{ testresult: number }];\n    console.log(selection);\n    console.log(selection[0]);\n    return expect(selection[0].testresult).toBe(1);\n  });\n});\n","resolvedModuleNames":["/Users/darraghoriordan/Documents/personal-projects/learn_databases/src/lesson3/appDatasource.ts"]}],["/Users/darraghoriordan/Documents/personal-projects/learn_databases/src/lesson3/appDatasource.ts",{"fileContent":"import { DataSource } from \"typeorm\";\n\nclass AppDataSource {\n  private static dataSource: DataSource = new DataSource({\n    type: \"postgres\",\n    host: \"host.docker.internal\",\n    port: 5412,\n    username: \"postgres\",\n    password: \"samplePassword\",\n    database: \"learn_databases\",\n    migrationsTableName: \"migrations\",\n    migrationsRun: true,\n    logging: true,\n    synchronize: false,\n    entities: [\"dist/**/*.entity.{ts,js}\"],\n    migrations: [\"dist/**/migrations/*.{ts,js}\"],\n  });\n\n  public static async connection(): Promise<DataSource> {\n    if (this.dataSource.isInitialized === false) {\n      await this.dataSource.initialize();\n    }\n    return this.dataSource;\n  }\n\n  public static async closeConnections(): Promise<void> {\n    return this.dataSource.destroy();\n  }\n}\n\nexport default AppDataSource;\n","resolvedModuleNames":[]}]]